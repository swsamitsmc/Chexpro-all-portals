# =============================================================================
# ChexPro Server Environment Configuration Template
# =============================================================================
# ⚠️  IMPORTANT: Copy this file to .env and fill in your actual values
# ⚠️  NEVER commit .env to version control - it's already in .gitignore
# =============================================================================

# -----------------------------------------------------------------------------
# Runtime Environment
# -----------------------------------------------------------------------------
# Set to 'production' for production deployments
NODE_ENV=development
PORT=3000
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Security Secrets - GENERATE NEW VALUES FOR PRODUCTION
# -----------------------------------------------------------------------------
# Generate using: openssl rand -hex 32
SESSION_SECRET=change-this-to-a-secure-random-string-min-32-chars

# Generate using: openssl rand -hex 32
CSRF_SECRET=change-this-to-a-secure-random-string-min-32-chars

# Generate using: openssl rand -hex 64 (for JWT access tokens)
JWT_SECRET=change-this-to-a-secure-random-string-min-64-chars

# Generate using: openssl rand -hex 64 (for JWT refresh tokens)
JWT_REFRESH_SECRET=change-this-to-a-secure-random-string-min-64-chars

# Generate using: openssl rand -hex 32
HEALTH_CHECK_TOKEN=change-this-to-a-secure-random-string

# Generate using: openssl rand -hex 32
METRICS_TOKEN=change-this-to-a-secure-random-string

# -----------------------------------------------------------------------------
# Token Encryption
# -----------------------------------------------------------------------------
# Generate using: openssl rand -hex 32
TOKEN_ENCRYPTION_KEY=change-this-to-a-secure-random-string-min-32-chars

# -----------------------------------------------------------------------------
# Cookie Configuration (Optional Overrides)
# -----------------------------------------------------------------------------
#SESSION_COOKIE_MAX_AGE=3600000
#CSRF_COOKIE_MAX_AGE=3600000
#PERSISTENT_COOKIE_MAX_AGE=2592000000
#PERSISTENT_COOKIE_SAME_SITE=Lax
#COOKIE_DOMAIN=.yourdomain.com

# -----------------------------------------------------------------------------
# CORS / Origins
# -----------------------------------------------------------------------------
# In production, set to your deployed frontend URL (no trailing slash)
FRONTEND_URL=https://yourdomain.com

# In development, comma-separated origins for local development
DEV_FRONTEND_URLS=http://localhost:5173,http://localhost:3000

# List allowed origins for CORS (comma-separated)
ALLOWED_ORIGINS=http://localhost:5173,https://yourdomain.com

# Optional: Admin IP whitelist for sensitive endpoints (comma-separated)
#ADMIN_IP_WHITELIST=127.0.0.1,::1

# -----------------------------------------------------------------------------
# Database Configuration (MySQL)
# -----------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=3306
DB_USER=your-db-user
DB_PASSWORD=your-secure-db-password
DB_DATABASE=chexpro_db

# Connection pool tuning (adjust based on traffic)
#DB_CONNECTION_LIMIT=10
#DB_QUEUE_LIMIT=50

# -----------------------------------------------------------------------------
# SMTP / Email Configuration
# -----------------------------------------------------------------------------
# Use your email service provider's SMTP settings
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@yourdomain.com
SMTP_PASS=your-email-password-or-app-token

# Default recipients (can be overridden in database)
CONTACT_RECIPIENT=admin@yourdomain.com
DEMO_RECIPIENT=admin@yourdomain.com

# -----------------------------------------------------------------------------
# Third-Party Integrations
# -----------------------------------------------------------------------------

# Google reCAPTCHA (recommended for production forms)
#RECAPTCHA_SITE_KEY=your-recaptcha-site-key
#RECAPTCHA_SECRET_KEY=your-recaptcha-secret-key

# -----------------------------------------------------------------------------
# Zitadel Identity Provider Configuration
# -----------------------------------------------------------------------------
# Local development: http://localhost:8080
# Production: https://your-organization.zitadel.cloud
ZITADEL_ISSUER=http://localhost:8080

# Zitadel Client ID for backend service (from Zitadel Console)
ZITADEL_CLIENT_ID=

# Zitadel Client Secret for backend service (for confidential clients)
# Leave empty for public clients or JWT auth
ZITADEL_CLIENT_SECRET=

# JWKS endpoint (auto-computed from issuer if empty)
ZITADEL_JWKS_URI=

# Whether to use Zitadel for authentication (set to 'true' to enable)
ZITADEL_ENABLED=false

# -----------------------------------------------------------------------------
# Secrets Rotation Instructions
# -----------------------------------------------------------------------------
# 1. Generate new secrets using one of these methods:
#    - Linux/Mac: openssl rand -hex 32
#    - Windows:   [Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Min 0 -Max 255 }))
#    - Online:    https://randomkeygen.com/
#
# 2. Update all secrets in this file
#
# 3. Update any external services with the new credentials:
#    - Email provider SMTP settings
#    - Database user password
#    - Any other integrated services
#
# 4. Deploy and test thoroughly
#
# 5. Consider using a secrets manager in production:
#    - AWS Secrets Manager
#    - Azure Key Vault
#    - HashiCorp Vault
# =============================================================================
